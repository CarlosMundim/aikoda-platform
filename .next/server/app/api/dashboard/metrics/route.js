(()=>{var e={};e.id=304,e.ids=[304],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},37740:(e,t,a)=>{"use strict";a.d(t,{z:()=>r});let n=require("@prisma/client"),r=global.prisma||new n.PrismaClient},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},62195:(e,t,a)=>{"use strict";a.d(t,{a:()=>i});let n=[{id:"cnd_001",firstName:"Andi",lastName:"Pratama",email:"andi.pratama@email.com",phone:"+62-21-555-0001",nationality:"Indonesia",currentPosition:"Senior Software Engineer",experience:"4-5",skills:["JavaScript","Python","React","AWS"],culturalScore:87.5},{id:"cnd_002",firstName:"Maria",lastName:"Santos",email:"maria.santos@email.com",phone:"+63-2-555-0002",nationality:"Philippines",currentPosition:"Data Scientist",experience:"6-10",skills:["Python","Machine Learning","Data Analysis"],culturalScore:92.1},{id:"cnd_003",firstName:"Nguyen",lastName:"Minh",email:"nguyen.minh@email.com",phone:"+84-28-555-0003",nationality:"Vietnam",currentPosition:"Quality Assurance Manager",experience:"6-10",skills:["Quality Control","Manufacturing","Project Management"],culturalScore:89.3}],r=[{id:"cmp_001",companyName:"Phoenix Technologies KK",industry:"Technology / IT",contactEmail:"hr@phoenix-tech.jp",hiringNeeds:["Software Engineers","Data Scientists"]},{id:"cmp_002",companyName:"Dragon Innovations Ltd",industry:"Manufacturing",contactEmail:"global-hr@dragon-innovations.com",hiringNeeds:["Manufacturing Workers","Quality Assurance"]},{id:"cmp_003",companyName:"Sakura Digital Solutions",industry:"Consulting",contactEmail:"recruitment@sakura-digital.co.jp",hiringNeeds:["Business Analysts","Digital Marketing"]}];class i{static async createCandidate(e){let t={id:"cnd_"+Date.now(),firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,nationality:e.nationality,currentPosition:e.currentPosition,experience:e.experience,skills:e.skills||[],culturalScore:Math.floor(20*Math.random())+80};return n.push(t),await new Promise(e=>setTimeout(e,100)),{id:t.id,success:!0}}static async createCompany(e){let t={id:"cmp_"+Date.now(),companyName:e.companyName,industry:e.industry,contactEmail:e.contactEmail,hiringNeeds:e.hiringNeeds||[]};return r.push(t),await new Promise(e=>setTimeout(e,100)),{id:t.id,success:!0}}static async getMetrics(){let e={totalCandidates:n.length+12844,totalCompanies:r.length+86,activeAssessments:234+Math.floor(10*Math.random()),culturalMatches:89.7+(2*Math.random()-1),marketIntelligence:156+Math.floor(5*Math.random()),realTimeAlerts:Math.floor(12*Math.random())+3,activeJobPostings:89+Math.floor(5*Math.random()),recentApplications:67+Math.floor(8*Math.random())};return await new Promise(e=>setTimeout(e,50)),e}static async getCandidates(e=1,t=10){let a=(e-1)*t;return{candidates:n.slice(a,a+t),pagination:{page:e,limit:t,total:n.length,totalPages:Math.ceil(n.length/t)}}}static async getCompanies(e=1,t=10){let a=(e-1)*t;return{companies:r.slice(a,a+t),pagination:{page:e,limit:t,total:r.length,totalPages:Math.ceil(r.length/t)}}}}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68758:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>y,routeModule:()=>m,serverHooks:()=>g,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>h});var n={};a.r(n),a.d(n,{GET:()=>d});var r=a(96559),i=a(48088),s=a(37719),o=a(32190),c=a(62195);let l=null;try{l=a(37740).z}catch(e){console.log("Database not available, using mock data")}async function d(e){try{if(l){let[e,t,a,n,r,i]=await Promise.all([l.candidate.count(),l.company.count(),l.culturalAssessment.count({where:{createdAt:{gte:new Date(Date.now()-864e5)}}}),l.application.count({where:{createdAt:{gte:new Date(Date.now()-6048e5)}}}),l.marketIntelligence.findMany({take:10,orderBy:{createdAt:"desc"}}),l.systemMetrics.findMany({where:{metricType:"system_performance",timestamp:{gte:new Date(Date.now()-36e5)}},orderBy:{timestamp:"desc"},take:20})]),s=await l.culturalAssessment.aggregate({_avg:{overallScore:!0}}),c=await l.jobPosting.count({where:{status:"active"}}),d=await l.marketIntelligence.count({where:{impact:"high",createdAt:{gte:new Date(Date.now()-864e5)}}});return o.NextResponse.json({metrics:{totalCandidates:e,totalCompanies:t,activeAssessments:a,culturalMatches:s._avg.overallScore||0,marketIntelligence:r.length,realTimeAlerts:d,activeJobPostings:c,recentApplications:n},trends:{candidateGrowth:await u("candidate"),companyGrowth:await u("company"),assessmentActivity:i.map(e=>({time:e.timestamp,value:e.value}))},lastUpdated:new Date().toISOString()})}{let e=await c.a.getMetrics();return o.NextResponse.json({metrics:e,trends:{candidateGrowth:15.7,companyGrowth:8.3,assessmentActivity:[]},lastUpdated:new Date().toISOString()})}}catch(e){return console.error("Error fetching dashboard metrics:",e),o.NextResponse.json({error:"Failed to fetch metrics"},{status:500})}}async function u(e){let t=new Date,a=new Date(t.getTime()-6048e5),n=new Date(t.getTime()-12096e5);try{if("candidate"===e){let[e,t]=await Promise.all([l.candidate.count({where:{createdAt:{gte:a}}}),l.candidate.count({where:{createdAt:{gte:n,lt:a}}})]);if(0===t)return 100*(e>0);return(e-t)/t*100}{let[e,t]=await Promise.all([l.company.count({where:{createdAt:{gte:a}}}),l.company.count({where:{createdAt:{gte:n,lt:a}}})]);if(0===t)return 100*(e>0);return(e-t)/t*100}}catch(t){return console.error(`Error calculating growth rate for ${e}:`,t),0}}let m=new r.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/dashboard/metrics/route",pathname:"/api/dashboard/metrics",filename:"route",bundlePath:"app/api/dashboard/metrics/route"},resolvedPagePath:"/home/carlos/koda_core/SYSTEM_BACKUP/Agent_Files/2_SERVICES/aikoda-presentation-cinema/app/api/dashboard/metrics/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:p,workUnitAsyncStorage:h,serverHooks:g}=m;function y(){return(0,s.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:h})}},78335:()=>{},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[243,580],()=>a(68758));module.exports=n})();