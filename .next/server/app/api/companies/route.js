(()=>{var e={};e.id=467,e.ids=[467],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},37740:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});let n=require("@prisma/client"),a=global.prisma||new n.PrismaClient},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67433:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>l,serverHooks:()=>g,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>p,POST:()=>u});var a=r(96559),s=r(48088),o=r(37719),i=r(32190),c=r(37740);async function u(e){try{let t=await e.json(),r=await c.z.company.create({data:{companyName:t.companyName,industry:t.industry,companySize:t.companySize,headquarters:t.headquarters,website:t.website||null,foundedYear:t.foundedYear||null,contactPerson:t.contactPerson,contactTitle:t.contactTitle,contactEmail:t.contactEmail,contactPhone:t.contactPhone,businessDescription:t.businessDescription,targetMarkets:t.targetMarkets,currentChallenges:t.currentChallenges,hiringNeeds:t.hiringNeeds,workCulture:t.workCulture,communicationStyle:t.communicationStyle,managementStyle:t.managementStyle,remoteWorkPolicy:t.remoteWorkPolicy,urgentPositions:t.urgentPositions||null,budgetRange:t.budgetRange,preferredCandidateOrigin:t.preferredCandidateOrigin,specialRequirements:t.specialRequirements||null}});if(t.urgentPositions)for(let e of t.urgentPositions.split(",").map(e=>e.trim()))await c.z.jobPosting.create({data:{companyId:r.id,title:e,description:`Urgent hiring for ${e} at ${r.companyName}`,requirements:t.hiringNeeds,location:t.headquarters,salaryRange:t.budgetRange,workType:t.remoteWorkPolicy,urgency:"high"}});return i.NextResponse.json({success:!0,companyId:r.id,message:"Company registered successfully"})}catch(e){return console.error("Error creating company:",e),i.NextResponse.json({error:"Failed to create company"},{status:500})}}async function p(e){try{let{searchParams:t}=new URL(e.url),r=parseInt(t.get("page")||"1"),n=parseInt(t.get("limit")||"10"),a=(r-1)*n,[s,o]=await Promise.all([c.z.company.findMany({skip:a,take:n,orderBy:{createdAt:"desc"},include:{jobPostings:{where:{status:"active"},select:{id:!0,title:!0,urgency:!0,location:!0}},_count:{select:{jobPostings:!0,culturalAssessments:!0}}}}),c.z.company.count()]);return i.NextResponse.json({companies:s,pagination:{page:r,limit:n,total:o,totalPages:Math.ceil(o/n)}})}catch(e){return console.error("Error fetching companies:",e),i.NextResponse.json({error:"Failed to fetch companies"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/companies/route",pathname:"/api/companies",filename:"route",bundlePath:"app/api/companies/route"},resolvedPagePath:"/home/carlos/koda_core/SYSTEM_BACKUP/Agent_Files/2_SERVICES/aikoda-presentation-cinema/app/api/companies/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:d,workUnitAsyncStorage:m,serverHooks:g}=l;function y(){return(0,o.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:m})}},78335:()=>{},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[243,580],()=>r(67433));module.exports=n})();